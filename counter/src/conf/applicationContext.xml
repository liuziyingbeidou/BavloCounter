<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:jee="http://www.springframework.org/schema/jee" xmlns:util="http://www.springframework.org/schema/util" xmlns:tx="http://www.springframework.org/schema/tx" xmlns:aop="http://www.springframework.org/schema/aop" xmlns:context="http://www.springframework.org/schema/context" xmlns:task="http://www.springframework.org/schema/task" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
	    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd 
	    http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.1.xsd
	 	http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.1.xsd 
		http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd 
	 	http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd 
	 	http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-3.1.xsd">
	 	
	<!-- Context -->
	<util:properties id="appProperties" location="classpath:application.properties"></util:properties>
	
	<context:property-placeholder location="classpath*:application.properties" ignore-resource-not-found="true" />
	<context:annotation-config />
	<context:component-scan base-package="com.bavlo.counter" />
	<tx:annotation-driven proxy-target-class="true" />
	<aop:aspectj-autoproxy proxy-target-class="true" />
	<tx:advice id="txAdvice" transaction-manager="transactionManager">
		<tx:attributes>
			<tx:method name="*" propagation="REQUIRED" rollback-for="exception.TxException"/>
		</tx:attributes>
	</tx:advice>
	<aop:config proxy-target-class="true">
		<aop:advisor advice-ref="txAdvice" pointcut="execution(* com.bavlo.counter.dao.HibernateDAO.*(..))"/>
	</aop:config>
	 
 
	
	<!-- 测试或开发环境--> 
	<beans profile="test">
		 <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
		  <property name="driverClassName">
		   <value>com.mysql.jdbc.Driver</value>
		  </property>
		  <property name="url">
		   <value>jdbc:mysql://192.168.1.109:3306/counter?zeroDateTimeBehavior=convertToNull&amp;useUnicode=true&amp;characterEncoding=utf-8</value>
		  </property>
		  <property name="username">
		   <value>root</value>
		  </property>
		  <property name="password">
		   <value>2011Bavlo2011Bavlo</value>
		  </property>
		 </bean>
	</beans>	
</beans>